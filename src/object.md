# 物件（Object）

## 為什麼要有物件

在 Javascript 中，物件大致上有兩個功能

* 物件導向程式設計
* 名稱空間

### 物件導向程式設計

（這部分可能必須先看過下一節的「陣列」才有辦法理解，可以先跳到最下面的「[語法](#語法)」。）

物件導向程式設計是一種程式開發常見的概念，他的概念很「豐富」，對於初學者而言大概不需要知道這麼多，因此這裡只稍微粗淺的介紹一下。

簡單來說，物件導向程式設計就是希望能把很多東西看成是一個一個的「物件」。比如說，假如我們在寫一個關於車子的遊戲，我們可能就會希望能在程式裡把每一台車子都當做是一個「物件」；假如這個遊戲裡同時還有人，我們可能也希望可以把每個人當成是一個物件。對於這些物件中的某些物件，比如說「人跟人」、「車跟車」，他們可能會有一些共通點：像是即使是不同個人，他們都會有名字、身高、體重、體力這些「屬性」；即使是不同的車，他們都會有馬力、速度、型號、油量等「屬性」。但是，「人」就沒有馬力這個屬性。所以，就有了「類別（Class）」這個概念，也就是說，我們是不是可以根據一個物件有哪些屬性把他們分成一個一個的類別。並且，我們發現，對於每個類別，我們「可以做的事」好像不太一樣，例如：只有「人」這個類別的物件可以休息，也只有「車子」這個類別可以加速。通常，我們就稱這些「可以做的事」稱為「方法（Method）」。

好吧，前面講了這麼多不知所云的抽象概念，那究竟「把東西看成物件」有什麼好處呢？首先，我覺得第一個好處是易於管理。我們可以想想看，假如今天有 100 台車子，如果你要同時在程式裡「記得」他們的馬力、速度、型號、油量的話，我們可以怎麽做？假如不考慮物件這回事的話，我可能只好用四個陣列

```js
var power = [];
var speed = [];
var model = [];
var gas = [];
```

然後，假如我現在想知道第 80 台車的速度是多少的話，我就必須這樣

```js
speed[80]
```

並且，如果我今天想要寫一個函式去檢查「這台車是不是好車」，而這個函式會同時考慮到馬力、速度、型號、油量，那我在定義這個函式時就必須得這樣

```js
function check(power, speed, model, gas){
    // ...
}
```

如果我要檢查第 40 台車是不是好車，我就必須這樣

```js
check(power[40], speed[40], model[40], gas[40])
```

然後，萬一我程式寫到一半，我現在突然想給車子多加一個屬性「出廠年分」，那完蛋了，我不僅要再多宣告一個 `year` 陣列，假如我的 `check` 函式也要一併考慮到車子的出廠年分的話，函式 `check` 當然要改，同時之前在程式裡每個用到 `check` 這個函式的地方都要改。也就是說，假如我已經在程式的上百個地方使用 `check` 這個函式，我就得改上百個地方。

那麼，讓我們來考慮看看有物件這個概念後，我們的程式會變成怎樣。首先，記錄 100 台車時，我們不用為每一個屬性宣告一個陣列：

```js
var cars = [];
```

假如我們想知道第 80 台車的速度的話，我們可以用這個語法：

```js
cars[80].speed
```

而我檢查是不是好車的函式也可以理所當然的直接把「車」當成參數（檢查「車」的函式當然參數是「車」呀），所以可以這樣定義：

```js
function check(car){
    // ...
}
```

再使用上，如果我們要檢查第 80 台車是不是好車：

```js
check(cars[80]);
```

萬一我們要多加一個 `year` 屬性，我們也只需要改 `check` 函式而已，其餘使用 `check` 函式的地方，我們都可以讓他原封不動。

因此，到目前為止，我想你應該已經隱約可以感覺得到用「物件」的概念去寫程式有什麼好處了，事實上這裡還只解釋了一些面向，更複雜的概念在你們寫程式有一段時間後，對所謂「寫程式」有更深的了解後，再自己去 google 吧！


### 名稱空間（Namespace）

假如我們的程式很大，可能有成千上萬個函式，假如我們不考慮「名稱空間」這個概念的話，函式的名稱就很可能衝突了。像是我們前面有了一個 `check` 函式檢查「是不是好車」，那如果我又想寫一個 `check` 函式檢查密碼，名字就重複了。一個解決的方法就是，我們可以宣告一個 `Car` 物件，然後把檢查「車」的 `check` 裝進去變成 `Car` 的一個屬性 `Car.check` ，而另一個檢查密碼則裝到另一個 `Password` 的物件去，變成 `Password.check` ，這樣兩個 `check` 就不會重複名字啦。而以上這些就是「名稱空間」的概念。

## 語法

最簡單建立物件的方式就是這樣了：

```js
var o = {
    屬性名字: 值,
    屬性名字: 值,
    屬性名字: 值
};
```

例如

```js
var car = {
    speed: 100,
    gas: 50,
    model: "M1 Abrams"
}
```

而取得物件屬性的方式也很簡單，像這樣

```js
car.speed;
car['speed'];
```

兩個方式都是一樣的，都可以取得 `car` 的 `speed` 屬性的值。

甚至還可以把 function 也放進去

```js
var car = {
    speed: 100,
    gas: 50,
    model: "M1 Abrams",
    speedUp: function(){ 
        this.speed += 100;
    }
}
```

呼叫函式的方式也很簡單：

```js
car.speedUp();
```

其中 `this` 關鍵字會指到函式被呼叫時 `.` 左邊的物件，像是對上面的 

```js
car.speedUp();
```

來說，這時候 `.` 左邊的物件是 `car` ，所以在 `speedUp` 這個函式中的 `this.speed += 100;` 的 `this` 其實就是指到 `car` ，也就是說 `this.speed += 100;` 會等於 `car.speed += 100;`，也就是說 `car.speedUp();` 會讓 `car` 的 `speed` 從 `100` 變成 `200`。

另外，在前面看過的

```js
var d = new Date();
```

這個 `new XXX();` 語法，其實也是在「建立」一個物件。像上面那一行是建立一個內建、別人寫好的 `Date` 物件，通常用這種方式「建立」的物件會在建立時做一些事，像是 `new Date()` 可能在建立時會想辦法把系統的時間存到物件裡，至於如果我們要如何寫一個以這種方式建立的物件，這裡就不多說了，想知道更多請看[MDN](https://developer.mozilla.org/zh-TW/docs/Web/JavaScript/Guide/Working_with_Objects)。
